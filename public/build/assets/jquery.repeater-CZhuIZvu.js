(function(o){var L=function(n){return n},y=function(n){return o.isArray(n)},A=function(n){return!y(n)&&n instanceof Object},q=function(n,f){return o.inArray(f,n)},M=function(n,f){return q(n,f)!==-1},m=function(n,f){for(var a in n)n.hasOwnProperty(a)&&f(n[a],a,n)},F=function(n){return n[n.length-1]},Q=function(n,f){var a=[];return m(n,function(c,s,v){a.push(f(c,s,v))}),a},D=function(n,f,a){var c={};return m(n,function(s,v,b){v=a?a(v,s):v,c[v]=f(s,v,b)}),c},N=function(n,f,a){return y(n)?Q(n,f):D(n,f,a)},E=function(n,f,a){return N(n,function(c,s){return c[f].apply(c,[])})},P=function(n,f){var a=null;return function(){var c=this,s=arguments;a===null&&(a=setTimeout(function(){a=null},n),f.apply(c,s))}},G=function(n){n=n||{};var f={};return n.publish=function(a,c){m(f[a],function(s){s(c)})},n.subscribe=function(a,c){f[a]=f[a]||[],f[a].push(c)},n.unsubscribe=function(a){m(f,function(c){var s=q(c,a);s!==-1&&c.splice(s,1)})},n};(function(n){var f=function(r,t){var e=G(),i=r.$;return e.getType=function(){throw'implement me (return type. "text", "radio", etc.)'},e.$=function(u){return u?i.find(u):i},e.disable=function(){e.$().prop("disabled",!0),e.publish("isEnabled",!1)},e.enable=function(){e.$().prop("disabled",!1),e.publish("isEnabled",!0)},t.equalTo=function(u,p){return u===p},t.publishChange=function(){var u;return function(p,x){var d=e.get();t.equalTo(d,u)||e.publish("change",{e:p,domElement:x}),u=d}}(),e},a=function(r,t){var e=f(r,t);return e.get=function(){return e.$().val()},e.set=function(i){e.$().val(i)},e.clear=function(){e.set("")},t.buildSetter=function(i){return function(u){i.call(e,u)}},e},c=function(r,t){r=y(r)?r:[r],t=y(t)?t:[t];var e=!0;return r.length!==t.length?e=!1:m(r,function(i){M(t,i)||(e=!1)}),e},s=function(r){var t={},e=a(r,t);return e.getType=function(){return"button"},e.$().on("change",function(i){t.publishChange(i,this)}),e},v=function(r){var t={},e=a(r,t);return e.getType=function(){return"checkbox"},e.get=function(){var i=[];return e.$().filter(":checked").each(function(){i.push(n(this).val())}),i},e.set=function(i){i=y(i)?i:[i],e.$().each(function(){n(this).prop("checked",!1)}),m(i,function(u){e.$().filter('[value="'+u+'"]').prop("checked",!0)})},t.equalTo=c,e.$().change(function(i){t.publishChange(i,this)}),e},b=function(r){var t=O(r);return t.getType=function(){return"email"},t},T=function(r){var t={},e=f(r,t);return e.getType=function(){return"file"},e.get=function(){return F(e.$().val().split("\\"))},e.clear=function(){this.$().each(function(){n(this).wrap("<form>").closest("form").get(0).reset(),n(this).unwrap()})},e.$().change(function(i){t.publishChange(i,this)}),e},S=function(r){var t={},e=a(r,t);return e.getType=function(){return"hidden"},e.$().change(function(i){t.publishChange(i,this)}),e},B=function(r){var t={},e=f(r,t);return e.getType=function(){return"file[multiple]"},e.get=function(){var i=e.$().get(0).files||[],u=[],p;for(p=0;p<(i.length||0);p+=1)u.push(i[p].name);return u},e.clear=function(){this.$().each(function(){n(this).wrap("<form>").closest("form").get(0).reset(),n(this).unwrap()})},e.$().change(function(i){t.publishChange(i,this)}),e},l=function(r){var t={},e=a(r,t);return e.getType=function(){return"select[multiple]"},e.get=function(){return e.$().val()||[]},e.set=function(i){e.$().val(i===""?[]:y(i)?i:[i])},t.equalTo=c,e.$().change(function(i){t.publishChange(i,this)}),e},h=function(r){var t=O(r);return t.getType=function(){return"password"},t},g=function(r){var t={},e=a(r,t);return e.getType=function(){return"radio"},e.get=function(){return e.$().filter(":checked").val()||null},e.set=function(i){i?e.$().filter('[value="'+i+'"]').prop("checked",!0):e.$().each(function(){n(this).prop("checked",!1)})},e.$().change(function(i){t.publishChange(i,this)}),e},I=function(r){var t={},e=a(r,t);return e.getType=function(){return"range"},e.$().change(function(i){t.publishChange(i,this)}),e},k=function(r){var t={},e=a(r,t);return e.getType=function(){return"select"},e.$().change(function(i){t.publishChange(i,this)}),e},O=function(r){var t={},e=a(r,t);return e.getType=function(){return"text"},e.$().on("change keyup keydown",function(i){t.publishChange(i,this)}),e},H=function(r){var t={},e=a(r,t);return e.getType=function(){return"textarea"},e.$().on("change keyup keydown",function(i){t.publishChange(i,this)}),e},U=function(r){var t=O(r);return t.getType=function(){return"url"},t},C=function(r){var t={},e=r.$,i=r.constructorOverride||{button:s,text:O,url:U,email:b,password:h,range:I,textarea:H,select:k,"select[multiple]":l,radio:g,checkbox:v,file:T,"file[multiple]":B,hidden:S},u=function(x,d){var $=A(d)?d:e.find(d);$.each(function(){var w=n(this).attr("name");t[w]=i[x]({$:n(this)})})},p=function(x,d){var $=[],w=A(d)?d:e.find(d);A(d)?t[w.attr("name")]=i[x]({$:w}):(w.each(function(){q($,n(this).attr("name"))===-1&&$.push(n(this).attr("name"))}),m($,function(R){t[R]=i[x]({$:e.find('input[name="'+R+'"]')})}))};if(e.is("input, select, textarea"))if(e.is('input[type="button"], button, input[type="submit"]'))u("button",e);else if(e.is("textarea"))u("textarea",e);else if(e.is('input[type="text"]'))u("text",e);else if(e.is('input[type="password"]'))u("password",e);else if(e.is('input[type="email"]'))u("email",e);else if(e.is('input[type="url"]'))u("url",e);else if(e.is('input[type="range"]'))u("range",e);else if(e.is("select"))e.is("[multiple]")?u("select[multiple]",e):u("select",e);else if(e.is('input[type="file"]'))e.is("[multiple]")?u("file[multiple]",e):u("file",e);else if(e.is('input[type="hidden"]'))u("hidden",e);else if(e.is('input[type="radio"]'))p("radio",e);else if(e.is('input[type="checkbox"]'))p("checkbox",e);else throw"invalid input type";else u("button",'input[type="button"], button, input[type="submit"]'),u("text",'input[type="text"]'),u("password",'input[type="password"]'),u("email",'input[type="email"]'),u("url",'input[type="url"]'),u("range",'input[type="range"]'),u("textarea","textarea"),u("select","select:not([multiple])"),u("select[multiple]","select[multiple]"),u("file",'input[type="file"]:not([multiple])'),u("file[multiple]",'input[type="file"][multiple]'),u("hidden",'input[type="hidden"]'),p("radio",'input[type="radio"]'),p("checkbox",'input[type="checkbox"]');return t};n.fn.inputVal=function(r){var t=n(this),e=C({$:t});return t.is("input, textarea, select")?typeof r>"u"?e[t.attr("name")].get():(e[t.attr("name")].set(r),t):typeof r>"u"?E(e,"get"):(m(r,function(i,u){e[u].set(i)}),t)},n.fn.inputOnChange=function(r){var t=n(this),e=C({$:t});return m(e,function(i){i.subscribe("change",function(u){r.call(u.domElement,u.e)})}),t},n.fn.inputDisable=function(){var r=n(this);return E(C({$:r}),"disable"),r},n.fn.inputEnable=function(){var r=n(this);return E(C({$:r}),"enable"),r},n.fn.inputClear=function(){var r=n(this);return E(C({$:r}),"clear"),r}})(jQuery),o.fn.repeater=function(n){n=n||{};var f=this,a=n.show||function(){o(this).show()},c=n.hide||function(l){l()},s=f.find("[data-repeater-list]"),v=s.find("[data-repeater-item]").first().clone().hide(),b=s.data("repeater-list"),T=function(){s.find("[data-repeater-item]").each(function(l){o(this).find("[name]").each(function(){var h=o(this).attr("name").match(/\[[^\]]+\]/g),g=h?F(h).replace(/\[|\]/g,""):o(this).attr("name"),I=b+"["+l+"]["+g+"]"+(o(this).is(":checkbox")?"[]":"");o(this).attr("name",I)})}),s.find("input[name][checked]").removeAttr("checked").prop("checked",!0)};T();var S=function(l,h){var g;g=l.find("[name]").first().attr("name").match(/\[([0-9]*)\]/)[1],l.inputVal(N(h,L,function(I){var k=b+"["+g+"]["+I+"]";return l.find('[name="'+k+'"]').length?k:k+"[]"}))},B=function(){var l=function(h){var g=n.defaultValues;h.find("[name]").each(function(){o(this).inputClear()}),g&&S(h,g)};return function(h){s.append(h),T(),l(h)}}();return f.find("[data-repeater-create]").click(P(50,function(){var l=v.clone();B(l),a.call(l.get(0))})),s.on("click","[data-repeater-delete]",P(50,function(){var l=o(this).closest("[data-repeater-item]").get(0);c.call(l,function(){o(l).remove(),T()})})),this}})(jQuery);
